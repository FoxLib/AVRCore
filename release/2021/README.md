# AVR Machine

Объем памяти составляет в целом 308Кб встроенной памяти, SDRAM 64 мб.
Поддерживается SDCard по протоколу SPI.

* Память программ: до 128k
* Для доступа из программы: 136k
* Зарезервировано памяти: 44k

# Список портов

Порты размаплены специально для того, чтобы не вызывать несовместимости
между Arduino UNO. Эти порты не используются и зарезервированы для
Atmega328PU.

```
20 RW MEMBANK       Текущий банк памяти (F000h-FFFFh)
21 R  KEYB          Последняя нажатая клавиша на клавиатуре
22 R  STATUS        0: FlipFlop-статус нажатия клавиш на клавиатуре
                    1: SPI Busy, если 1-устройство занято
                    2: DRAM Busy, если 1-устройсто занято

2C RW CURSORX       X координата курсора (0..79)
2D RW CURSORY       Y координата курсора (0..24)
2E R  TIMERL        Значение миллисекундного таймера  7:0
2F R  TIMERH        Значение миллисекундного таймера 15:8
30 RW SDRAM0A       Адрес SDRAM  7: 0
31 RW SDRAM1A       Адрес SDRAM 15: 8
32 RW SDRAM2A       Адрес SDRAM 23:16
33 RW SDRAM3A       Адрес SDRAM 31:24
34 RW SDRAMDATA     Чтение из запись байта в память SDRAM
38 RW VIDEOMODE     Видеорежим
                    0: 80x25 TEXT Классический режим IBM (F000h)

```

# Карта памяти

Память меняется через банки памяти, которые отображатся на F000h-FFFFh

```
0000h-EFFFh Общая память для работы программы и стека
F000h-FFFFh Банки памяти
```

Назначение банков памяти:

```
00      4k  Текстовый видеорежим 0 (IBM)
01      4k  Знакогенератор видеорежима
10-1F   64k Видеопамять и общая память для графических режимов
20-2F   64k Память общего назначения
```
